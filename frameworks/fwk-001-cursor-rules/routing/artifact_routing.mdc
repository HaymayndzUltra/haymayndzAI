# Artifact Routing — Deterministic Paths (separate from command routing)

## Purpose
- Define canonical filesystem locations for governance/config artifacts.
- Keep artifact routing separate from command routing (see `system-prompt/rules_master_toggle.mdc`).
- Enable conflict detection by comparing this map against effective paths.

## Canonical Routes (templated)
- Variables: `{framework}` (e.g., `fwk-001-cursor-rules`), `{artifactId}`
- schema → `frameworks/{framework}/schemas/{artifactId}.mdc`
- routing → `frameworks/{framework}/routing/{artifactId}.mdc`
- sync_rules → `frameworks/{framework}/sync/{artifactId}.mdc`
- hydration_rules → `frameworks/{framework}/hydration/{artifactId}.mdc`
- framework_contract → `frameworks/{framework}/contracts/{artifactId}.mdc`
- promotion_rules → `frameworks/{framework}/promotion/{artifactId}.mdc`

## Policy
- Deterministic resolution: If multiple routes match, sort by pathPattern lexicographically and choose first.
- No overlaps with command routing. If a path collides with `routing_matrix.json`, prefer `routing_matrix.json` for commands and update this file to avoid ambiguity.
- All artifacts must be under their framework directory; no cross-framework writes.

## Validation
- A route is valid if its resolved parent directory exists or can be created by the writer.
- Conflicts are reported in `DOCS/changes/routing_conflicts_report.md` (generated by tooling).


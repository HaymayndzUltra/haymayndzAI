meta:
  source_backlog: memory-bank/plan/product_backlog.yaml
  owner: planning_ai
  version: 0.1.0
  generated_at: 2025-08-25T00:00:00Z

workstreams:
  P0:
    - id: BL-001
      title: Orchestrator role selection + rule attach logging (stabilize)
      owner_role: execution_orchestrator
      dependencies: []
      artifacts:
        - .cursor/rules/execution_orchestrator.mdc
        - rule_attach_log.json
      acceptance_criteria:
        - Given repo markers for each stack, when detection runs, then attach_rules is correct and logged.
        - 100% of supported stacks produce a rule_attach_log entry with timestamp and mapping.
        - Unit checks verify at least one file per stack triggers expected rules.

    - id: BL-002
      title: Two-session audit → peer review gate (bias separation)
      owner_role: auditor_ai
      dependencies:
        - BL-004
      artifacts:
        - frameworks/fwk-001-cursor-rules/examples/Summary_Report.md
        - frameworks/fwk-001-cursor-rules/examples/Validation_Report.md
      acceptance_criteria:
        - /audit produces Summary_Report.md with line-cited evidence to Action_Plan.md and codebase.
        - /peer_review produces Validation_Report.md with CONFIRM/CHALLENGE, NEW-RISK, and clear GO/NO-GO.
        - NO cross-session memory contamination (manual spot-check of narratives differs).

    - id: BL-003
      title: Product backlog → technical plan → draft Action_Plan generator
      owner_role: planning_ai
      dependencies: []
      artifacts:
        - memory-bank/plan/Action_Plan.md
        - tools/generate_action_plan.py
      acceptance_criteria:
        - Running generator with a valid backlog yields Action_Plan.md in memory-bank/plan/.
        - The plan covers phases, gates, routing, security, observability, and memory bridge.
        - Auditor can run on the draft and produce a usable Summary_Report.md.

    - id: BL-004
      title: Example project wiring for gates (audit/validation/synthesis)
      owner_role: documentation_ai
      dependencies:
        - BL-003
      artifacts:
        - frameworks/fwk-001-cursor-rules/examples/Action_Plan.md
        - frameworks/fwk-001-cursor-rules/examples/Summary_Report.md
        - frameworks/fwk-001-cursor-rules/examples/Validation_Report.md
        - frameworks/fwk-001-cursor-rules/examples/Final_Implementation_Plan.md
      acceptance_criteria:
        - Following README steps produces all 3 artifacts with correct content.
        - GO/NO-GO logic is demonstrable with toggled inputs.

    - id: BL-005
      title: Security QA baseline (SQLi/XSS/Auth) integrated in qa_ai
      owner_role: qa_ai
      dependencies: []
      artifacts:
        - .cursor/rules/qa_ai.mdc
        - security_report.md
      acceptance_criteria:
        - Security checks list present and mapped to pass/fail signals.
        - Demo repo yields a security_report.md; failing checks block pipeline.

    - id: BL-006
      title: Observability starter pack (alerts + dashboards) validation
      owner_role: observability_ai
      dependencies: []
      artifacts:
        - frameworks/fwk-001-cursor-rules/observability/alerts.yaml
        - frameworks/fwk-001-cursor-rules/observability/dashboards.mmd
      acceptance_criteria:
        - YAML lints cleanly; Mermaid renders without errors.
        - Observability gate passes with these artifacts present.

    - id: BL-007
      title: Memory learning loop (pattern_library.json) + storage layout
      owner_role: memory_ai
      dependencies: []
      artifacts:
        - .cursor/rules/memory_ai.mdc
        - storage/memory/knowledge_base.jsonl
        - storage/memory/kb.index.faiss
        - pattern_library.json
      acceptance_criteria:
        - After QA PASS, learning signals are appended to pattern_library.json.
        - recall/snapshot/learn CLI confirms round-trip.

    - id: BL-008
      title: Framework auto-attach globs coverage and tests
      owner_role: codegen_ai
      dependencies:
        - BL-001
      artifacts:
        - .cursor/frameworks/**.mdc
        - tests for rule attach mapping
      acceptance_criteria:
        - For a minimal file in each stack, attach log lists the expected rules.
        - No false positives for unrelated stacks.

    - id: BL-009
      title: Onboarding & Quick Start for solo dev workflow
      owner_role: documentation_ai
      dependencies:
        - BL-004
      artifacts:
        - /workspace/docs/inventories/*
        - /frameworks/fwk-001-cursor-rules/QUICK_START.md
      acceptance_criteria:
        - Following guide produces all intermediate artifacts.
        - New user can run both sessions without confusion (separate chats).

  P1:
    - id: BL-010
      title: Planner-first mode (+ confirmation prompts) validation
      owner_role: planner_moderator_ai
      dependencies: []
      artifacts:
        - confirmation logs
      acceptance_criteria:
        - Restricted actions require explicit confirmation (logged with timestamp and actor).
        - Toggling off restores normal behavior.

    - id: BL-011
      title: Promotion snapshots + rollback rehearsal
      owner_role: mlops_ai
      dependencies: []
      artifacts:
        - promotion/snapshot_cli.py
        - promotion/rollback_playbook.md
      acceptance_criteria:
        - Snapshot creation and restoration succeeds with logs.
        - Rehearsal completes without errors; health checks OK post-restore.

    - id: BL-012
      title: Routing override progressive mode tests
      owner_role: execution_orchestrator
      dependencies: []
      artifacts:
        - DOCS/changes/routing_override.yaml
        - DOCS/changes/routing_effective.shadow.json
      acceptance_criteria:
        - Applying overrides changes effective routing as expected.
        - Restoring .bak reverts to baseline; conflicts report remains empty.

    - id: BL-013
      title: Hydration selector scenarios
      owner_role: codegen_ai
      dependencies: []
      artifacts:
        - hydration/hydration_selector.py
        - hydration/hydration_tests.yaml
      acceptance_criteria:
        - All hydration tests pass locally; selector decisions are deterministic.

    - id: BL-014
      title: Performance & concurrency thresholds
      owner_role: qa_ai
      dependencies: []
      artifacts:
        - pytest.ini updates
        - tests/concurrency
      acceptance_criteria:
        - Coverage ≥ 80%; top 10 test durations under target; concurrency tests pass.

  P2:
    - id: BL-015
      title: Freelance business templates (client onboarding, QA workflows)
      owner_role: product_owner_ai
      dependencies:
        - BL-009
      artifacts:
        - .cursor/templates/*
        - /workspace/docs/inventories/DECISION_GUIDE.md
      acceptance_criteria:
        - Templates included and referenced from Quick Start.
        - At least two verticals have baseline rulesets.